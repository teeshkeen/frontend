{"ast":null,"code":"import React,{useState,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProductModal=_ref=>{let{isOpen,onClose,categoryId,products,onAddProduct,onUpdateProduct,onDeleteProduct,onEditProduct,selectedProduct}=_ref;const[showForm,setShowForm]=useState(false);const[formData,setFormData]=useState({name:'',desc:'',costFirst:'',costSecond:'',countType:'',imageUrl:''});useEffect(()=>{if(selectedProduct){setFormData(selectedProduct);setShowForm(true);}else{resetForm();}},[selectedProduct]);const resetForm=()=>{setFormData({name:'',desc:'',costFirst:'',costSecond:'',countType:'',imageUrl:''});setShowForm(false);};const handleInputChange=e=>{const{name,value}=e.target;setFormData({...formData,[name]:value});};const handleSubmit=e=>{e.preventDefault();if(selectedProduct){onUpdateProduct(formData);}else{onAddProduct(formData);}resetForm();};const handleAddNewClick=()=>{setShowForm(true);setFormData({name:'',desc:'',costFirst:'',costSecond:'',countType:'',imageUrl:''});};if(!isOpen)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-4 sm:p-6 rounded-lg max-w-2xl w-full max-h-[90vh] flex flex-col\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl sm:text-2xl font-bold mb-4\",children:\"\\u0423\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u0442\\u043E\\u0432\\u0430\\u0440\\u0430\\u043C\\u0438\"}),!showForm&&/*#__PURE__*/_jsx(\"button\",{onClick:handleAddNewClick,className:\"mb-4 bg-green-500 text-white px-2 py-1 sm:px-4 sm:py-2 text-sm sm:text-base rounded hover:bg-green-600\",children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043D\\u043E\\u0432\\u044B\\u0439 \\u0442\\u043E\\u0432\\u0430\\u0440\"}),showForm&&/*#__PURE__*/_jsxs(\"form\",{id:\"product-form\",onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:formData.name,onChange:handleInputChange,placeholder:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0442\\u043E\\u0432\\u0430\\u0440\\u0430\",className:\"w-full p-2 border rounded\",required:true}),/*#__PURE__*/_jsx(\"textarea\",{name:\"desc\",value:formData.desc,onChange:handleInputChange,placeholder:\"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435 \\u0442\\u043E\\u0432\\u0430\\u0440\\u0430\",className:\"w-full p-2 border rounded\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"costFirst\",value:formData.costFirst,onChange:handleInputChange,placeholder:\"\\u0426\\u0435\\u043D\\u0430 (\\u0431\\u0435\\u0437\\u043D\\u0430\\u043B)\",className:\"w-full p-2 border rounded\",required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"costSecond\",value:formData.costSecond,onChange:handleInputChange,placeholder:\"\\u0426\\u0435\\u043D\\u0430 (\\u043D\\u0430\\u043B)\",className:\"w-full p-2 border rounded\",required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"countType\",value:formData.countType,onChange:handleInputChange,placeholder:\"\\u0415\\u0434\\u0438\\u043D\\u0438\\u0446\\u0430 \\u0438\\u0437\\u043C\\u0435\\u0440\\u0435\\u043D\\u0438\\u044F\",className:\"w-full p-2 border rounded\",required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"imageUrl\",value:formData.imageUrl,onChange:handleInputChange,placeholder:\"URL \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u044F\",className:\"w-full p-2 border rounded\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:resetForm,className:\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\",children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",children:selectedProduct?'Обновить товар':'Добавить товар'})]})]}),!showForm&&/*#__PURE__*/_jsx(\"div\",{className:\"overflow-y-auto flex-grow\",style:{maxHeight:'calc(90vh - 200px)'},children:/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-2\",children:products.map(product=>/*#__PURE__*/_jsxs(\"li\",{className:\"flex flex-col sm:flex-row justify-between items-start sm:items-center p-2 hover:bg-gray-100\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"mb-2 sm:mb-0\",children:product.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>onEditProduct(product),className:\"bg-yellow-500 text-white px-2 py-1 text-xs sm:text-sm rounded hover:bg-yellow-600\",children:\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>onDeleteProduct(product.id),className:\"bg-red-500 text-white px-2 py-1 text-xs sm:text-sm rounded hover:bg-red-600\",children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"})]})]},product.id))})}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"mt-4 bg-gray-500 text-white px-2 py-1 sm:px-4 sm:py-2 text-sm sm:text-base rounded hover:bg-gray-600\",children:\"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\"})]})});};export default ProductModal;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","ProductModal","_ref","isOpen","onClose","categoryId","products","onAddProduct","onUpdateProduct","onDeleteProduct","onEditProduct","selectedProduct","showForm","setShowForm","formData","setFormData","name","desc","costFirst","costSecond","countType","imageUrl","resetForm","handleInputChange","e","value","target","handleSubmit","preventDefault","handleAddNewClick","className","children","onClick","id","onSubmit","type","onChange","placeholder","required","style","maxHeight","map","product"],"sources":["/root/frontend/src/features/admin-panel/product/ProductModal.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n\nconst ProductModal = ({ isOpen, onClose, categoryId, products, onAddProduct, onUpdateProduct, onDeleteProduct, onEditProduct, selectedProduct }) => {\n  const [showForm, setShowForm] = useState(false);\n  const [formData, setFormData] = useState({\n    name: '',\n    desc: '',\n    costFirst: '',\n    costSecond: '',\n    countType: '',\n    imageUrl: ''\n  });\n\n  useEffect(() => {\n    if (selectedProduct) {\n      setFormData(selectedProduct);\n      setShowForm(true);\n    } else {\n      resetForm();\n    }\n  }, [selectedProduct]);\n\n  const resetForm = () => {\n    setFormData({\n      name: '',\n      desc: '',\n      costFirst: '',\n      costSecond: '',\n      countType: '',\n      imageUrl: ''\n    });\n    setShowForm(false);\n  };\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setFormData({ ...formData, [name]: value });\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (selectedProduct) {\n      onUpdateProduct(formData);\n    } else {\n      onAddProduct(formData);\n    }\n    resetForm();\n  };\n\n  const handleAddNewClick = () => {\n    setShowForm(true);\n    setFormData({\n      name: '',\n      desc: '',\n      costFirst: '',\n      costSecond: '',\n      countType: '',\n      imageUrl: ''\n    });\n  };\n\n  if (!isOpen) return null;\n\n  return (\n<div className=\"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center\">\n      <div className=\"bg-white p-4 sm:p-6 rounded-lg max-w-2xl w-full max-h-[90vh] flex flex-col\">\n        <h2 className=\"text-xl sm:text-2xl font-bold mb-4\">Управление товарами</h2>\n        \n        {!showForm && (\n          <button\n            onClick={handleAddNewClick}\n            className=\"mb-4 bg-green-500 text-white px-2 py-1 sm:px-4 sm:py-2 text-sm sm:text-base rounded hover:bg-green-600\"\n          >\n            Добавить новый товар\n          </button>\n        )}\n\n{showForm && (\n  <form id=\"product-form\" onSubmit={handleSubmit} className=\"space-y-4\">\n    <input\n      type=\"text\"\n      name=\"name\"\n      value={formData.name}\n      onChange={handleInputChange}\n      placeholder=\"Название товара\"\n      className=\"w-full p-2 border rounded\"\n      required\n    />\n    <textarea\n      name=\"desc\"\n      value={formData.desc}\n      onChange={handleInputChange}\n      placeholder=\"Описание товара\"\n      className=\"w-full p-2 border rounded\"\n    />\n    <input\n      type=\"text\"\n      name=\"costFirst\"\n      value={formData.costFirst}\n      onChange={handleInputChange}\n      placeholder=\"Цена (безнал)\"\n      className=\"w-full p-2 border rounded\"\n      required\n    />\n    <input\n      type=\"text\"\n      name=\"costSecond\"\n      value={formData.costSecond}\n      onChange={handleInputChange}\n      placeholder=\"Цена (нал)\"\n      className=\"w-full p-2 border rounded\"\n      required\n    />\n    <input\n      type=\"text\"\n      name=\"countType\"\n      value={formData.countType}\n      onChange={handleInputChange}\n      placeholder=\"Единица измерения\"\n      className=\"w-full p-2 border rounded\"\n      required\n    />\n    <input\n      type=\"text\"\n      name=\"imageUrl\"\n      value={formData.imageUrl}\n      onChange={handleInputChange}\n      placeholder=\"URL изображения\"\n      className=\"w-full p-2 border rounded\"\n    />\n    <div className=\"flex justify-end space-x-2\">\n      <button\n        type=\"button\"\n        onClick={resetForm}\n        className=\"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\"\n      >\n        Отмена\n      </button>\n      <button\n        type=\"submit\"\n        className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n      >\n        {selectedProduct ? 'Обновить товар' : 'Добавить товар'}\n      </button>\n    </div>\n  </form>\n)}\n\n{!showForm && (\n          <div className=\"overflow-y-auto flex-grow\" style={{maxHeight: 'calc(90vh - 200px)'}}>\n            <ul className=\"space-y-2\">\n              {products.map(product => (\n                <li key={product.id} className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center p-2 hover:bg-gray-100\">\n                  <span className=\"mb-2 sm:mb-0\">{product.name}</span>\n                  <div className=\"flex space-x-2\">\n                    <button\n                      onClick={() => onEditProduct(product)}\n                      className=\"bg-yellow-500 text-white px-2 py-1 text-xs sm:text-sm rounded hover:bg-yellow-600\"\n                    >\n                      Изменить\n                    </button>\n                    <button\n                      onClick={() => onDeleteProduct(product.id)}\n                      className=\"bg-red-500 text-white px-2 py-1 text-xs sm:text-sm rounded hover:bg-red-600\"\n                    >\n                      Удалить\n                    </button>\n                  </div>\n                </li>\n              ))}\n            </ul>\n          </div>\n        )}\n\n        <button\n          onClick={onClose}\n          className=\"mt-4 bg-gray-500 text-white px-2 py-1 sm:px-4 sm:py-2 text-sm sm:text-base rounded hover:bg-gray-600\"\n        >\n          Закрыть\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default ProductModal;\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}