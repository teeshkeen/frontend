{"ast":null,"code":"import React,{useState,useEffect}from'react';import{categoryAPI}from'../../../../shared/services/api';import BlockTitle from'../../../../shared/ui/BlockTitle';import CatalogCard from'../../../../features/catalog/ui/CatalogCard';import CatalogNav from'../catalog/ui/CatalogNav';import{useNavigate}from'react-router-dom';import Button from'../../../../shared/ui/Button';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Catalog=()=>{const[categories,setCategories]=useState([]);const[error,setError]=useState(null);const[visibleCount,setVisibleCount]=useState(5);// Количество видимых карточек\nconst navigate=useNavigate();useEffect(()=>{loadCategories();},[]);const loadCategories=async()=>{try{const response=await categoryAPI.getCategories();setCategories(response.data.categories);}catch(error){console.error('Error loading categories:',error);setError('Ошибка загрузки категорий');}};const handleCardClick=id=>{navigate(`/nomenclature/${id}`);};if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:error});}const handleShowMore=()=>{setVisibleCount(prevCount=>prevCount+5);// Увеличиваем количество видимых карточек\n};return/*#__PURE__*/_jsxs(\"div\",{id:\"catalog\",className:\"mb-14 768:mb-24\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-5\",children:/*#__PURE__*/_jsx(BlockTitle,{children:\"\\u041A\\u0430\\u0442\\u0430\\u043B\\u043E\\u0433\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"1280:flex 1280:flex-row 1280:items-start 1280:gap-14 mb-[30px]\",children:[/*#__PURE__*/_jsx(CatalogNav,{styles:\"hidden 1280:flex\"}),/*#__PURE__*/_jsx(\"div\",{id:\"catalogCards\",className:\"grid grid-cols-1 768:grid-cols-2 1280:grid-cols-3 gap-5 auto-rows-fr\",children:categories.slice(0,visibleCount).map(category=>/*#__PURE__*/_jsxs(\"div\",{onClick:()=>handleCardClick(category.id),children:[/*#__PURE__*/_jsx(CatalogCard,{name:category.name,title:category.name,cost:category.cost,imageUrl:category.imageUrl}),\" \"]},category.id))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"768:flex 768:justify-center\",children:visibleCount<categories.length&&/*#__PURE__*/_jsx(Button,{text:'Показать еще',onClick:handleShowMore})})]});};export default Catalog;","map":{"version":3,"names":["React","useState","useEffect","categoryAPI","BlockTitle","CatalogCard","CatalogNav","useNavigate","Button","jsx","_jsx","jsxs","_jsxs","Catalog","categories","setCategories","error","setError","visibleCount","setVisibleCount","navigate","loadCategories","response","getCategories","data","console","handleCardClick","id","className","children","handleShowMore","prevCount","styles","slice","map","category","onClick","name","title","cost","imageUrl","length","text"],"sources":["/root/frontend/src/pages/home/ui/catalog/Catalog.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { categoryAPI } from '../../../../shared/services/api';\nimport BlockTitle from '../../../../shared/ui/BlockTitle';\nimport CatalogCard from '../../../../features/catalog/ui/CatalogCard';\nimport CatalogNav from '../catalog/ui/CatalogNav'\nimport { useNavigate } from 'react-router-dom';\nimport Button from '../../../../shared/ui/Button';\nconst Catalog = () => {\n  const [categories, setCategories] = useState([]);\n  const [error, setError] = useState(null);\n  const [visibleCount, setVisibleCount] = useState(5); // Количество видимых карточек\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    loadCategories();\n  }, []);\n\n  const loadCategories = async () => {\n    try {\n      const response = await categoryAPI.getCategories();\n      setCategories(response.data.categories);\n    } catch (error) {\n      console.error('Error loading categories:', error);\n      setError('Ошибка загрузки категорий');\n    }\n  };\n\n  const handleCardClick = (id) => {\n    navigate(`/nomenclature/${id}`);\n  };\n\n  if (error) {\n    return <div className=\"text-red-500\">{error}</div>;\n  }\n\n  const handleShowMore = () => {\n    setVisibleCount(prevCount => prevCount + 5); // Увеличиваем количество видимых карточек\n  };\n  return (\n    <div id='catalog' className='mb-14 768:mb-24'>\n    <div className='mb-5'>\n      <BlockTitle>Каталог</BlockTitle>\n    </div>\n    <div className=\"1280:flex 1280:flex-row 1280:items-start 1280:gap-14 mb-[30px]\">\n      <CatalogNav styles='hidden 1280:flex'/>\n      <div id='catalogCards' className='grid grid-cols-1 768:grid-cols-2 1280:grid-cols-3 gap-5 auto-rows-fr'>\n                      {\n\n                      categories.slice(0, visibleCount).map(category => (\n          <div key={category.id} onClick={() => handleCardClick(category.id)}>\n            <CatalogCard name={category.name} title={category.name} cost={category.cost} imageUrl={category.imageUrl} /> {/* Pass category name and image to CatalogCard */}\n          </div>\n        ))}\n\n    </div>\n\n    </div>\n    <div className=\"768:flex 768:justify-center\">\n    {visibleCount < categories.length && (\n            <Button text={'Показать еще'} onClick={handleShowMore}/>\n          )}\n    </div>\n  </div>\n    \n  );\n};\n\nexport default Catalog;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}